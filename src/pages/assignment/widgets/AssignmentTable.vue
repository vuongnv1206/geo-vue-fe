<template v-for="assClass in props.assignmentsByClass" :key="assClass.id" :loading="props.loading">
  <VaCard>
    <VaCardContent>Recommend</VaCardContent>
    <VaList class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
      <template v-for="assClass in props.assignmentsByClass" :key="assClass.id">
        <template v-for="assignment in assClass.assignments.slice().reverse().slice(0, 4)" :key="assignment.id">
          <VaListItem class="mb-2" :to="{ name: 'assignment-details', params: { id: assignment.id } }">
            <VaCard class="border rounded-lg p-3 hover:scale-105 transition-transform duration-200 w-full">
              <div class="flex items-center">
                <VaListItemSection avatar>
                  <VaIcon name="book" size="3rem" />
                </VaListItemSection>
                <VaListItemSection>
                  <VaListItemLabel>{{ assignment.name }}</VaListItemLabel>
                  <VaListItemLabel caption>{{ format.formatDate(assignment.startTime) }}</VaListItemLabel>
                  <VaListItemLabel caption>{{ format.formatDate(assignment.endTime) }}</VaListItemLabel>
                </VaListItemSection>
                <VaListItemSection icon>
                  <VaCard>0/100</VaCard>
                </VaListItemSection>
              </div>
            </VaCard>
          </VaListItem>
        </template>
      </template>
    </VaList>
  </VaCard>
  <VaCard>
    <VaCardContent>All</VaCardContent>
    <VaCard class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
      <template v-for="assClass in props.assignmentsByClass" :key="assClass.id">
        <VaCard v-if="assClass.assignments.length > 0" class="border p-4 rounded">
          <div class="flex justify-between items-center mb-4">
            <span class="font-semibold">{{ assClass.name }}</span>
            <VaChip v-if="currentUserId != assClass.ownerId" outline class="ml-2" size="small"> Share </VaChip>
            <div class="flex items-center space-x-2 ml-auto">
              <VaButton preset="plain" size="small">Xem tất cả</VaButton>
            </div>
          </div>
          <VaDivider />
          <VaList>
            <template v-for="assignment in assClass.assignments.slice().reverse().slice(0, 2)" :key="assignment.id">
              <VaListItem class="mb-2" :to="{ name: 'assignment-details', params: { id: assignment.id } }">
                <VaCard
                  class="flex items-center border rounded-lg p-3 w-full hover:scale-105 transition-transform duration-200"
                >
                  <VaListItemSection avatar>
                    <VaIcon name="book" size="3rem" />
                  </VaListItemSection>
                  <VaListItemSection>
                    <VaListItemLabel>{{ assignment.name }}</VaListItemLabel>
                    <VaListItemLabel caption>{{ format.formatDate(assignment.startTime) }}</VaListItemLabel>
                    <VaListItemLabel caption>{{ format.formatDate(assignment.endTime) }}</VaListItemLabel>
                  </VaListItemSection>
                  <VaListItemSection icon>
                    <VaCard>0/100</VaCard>
                  </VaListItemSection>
                </VaCard>
              </VaListItem>
            </template>
          </VaList>
        </VaCard>
      </template>
    </VaCard>
  </VaCard>
</template>

<script lang="ts" setup>
import { PropType } from 'vue'
import { format } from '@/services/utils'
import { Classrooms } from '@/pages/classrooms/type'
import { useAuthStore } from '@/stores/modules/auth.module'

const authStore = useAuthStore()
const currentUserId = authStore.user?.id

const props = defineProps({
  assignmentsByClass: {
    type: Array as PropType<Classrooms[]>,
    required: true,
  },
  loading: {
    type: Boolean,
    required: true,
  },
})
</script>

<style lang="scss" scoped></style>
